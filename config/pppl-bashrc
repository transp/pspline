module purge
module load git

# Specify compiler (GCC, ICC, PGC):
export COMPILER=ICC15

if [ $COMPILER = 'ICC' -o $COMPILER = 'ICC19' ]; then
    module load intel/2019.u3
elif [ $COMPILER = 'ICC15' ]; then
    module load intel/2015.u1
elif [ $COMPILER = 'PGC' ]; then
    module load pgf/19.1
elif [ $COMPILER = 'GCC6' ]; then
    module load gcc/6.1.0
else
    module load gcc/9.1.0
fi

module load szip
module load curl
module load hdf
module load hdf5-serial
module load netcdf-c
module load netcdf-fortran

if [ $COMPILER = 'ICC15' ]; then
   export NETCDF_FORTRAN_HOME=$NETCDFHOME
   export COMPILER=ICC
elif [ $COMPILER = 'GCC6' ]; then
   export NETCDF_FORTRAN_HOME=$NETCDFHOME
   export COMPILER=GCC
fi

if [ ! -z "$NETCDF_FORTRAN_HOME" ]; then
   export NETCDF_FLAGS=" -D_NETCDF"
   export L_NETCDF=" -L$NETCDF_FORTRAN_HOME/lib -lnetcdff"
   export I_NETCDF=" -I$NETCDF_FORTRAN_HOME/include"
fi
